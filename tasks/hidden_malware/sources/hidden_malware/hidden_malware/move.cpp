#include "move.h"

int Move::copy_file(std::string from, std::wstring to_dir)
{
	fs::path sourceFile = from;
	fs::path targetParent = to_dir;

	auto target = targetParent / sourceFile.filename();

	try // If you want to avoid exception handling, then use the error code overload of the following functions.
	{
		fs::create_directories(targetParent); // Recursively create target directory if not existing.
		fs::copy_file(sourceFile, target, fs::copy_options::overwrite_existing);
	}
	catch (std::exception &e) // Not using fs::filesystem_error since std::bad_alloc can throw too.  
	{
		return 1;
	}

	return 0;
}
